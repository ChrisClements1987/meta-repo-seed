# Repository Settings Configuration for {{PROJECT_NAME}}
# Generated by Meta-Repo Seeding System
#
# This file defines the repository settings as code for automated governance.
# Apply with: gh api repos/{{GITHUB_USERNAME}}/{{PROJECT_NAME}} --method PATCH --input repository-settings.yml

# Basic repository information
name: "{{PROJECT_NAME}}"
description: "Business-in-a-Box project: {{PROJECT_NAME}} - Professional infrastructure and governance from day one"
homepage: "https://{{GITHUB_USERNAME}}.github.io/{{PROJECT_NAME}}"
topics:
  - "business-in-a-box"
  - "meta-repo"
  - "governance"
  - "automation"
  - "startup"
  - "{{PROJECT_NAME}}"

# Repository settings
private: false
has_issues: true
has_projects: true
has_wiki: true
has_downloads: true
has_pages: false
archived: false
disabled: false

# Default branch and merge settings
default_branch: "main"
delete_branch_on_merge: true
allow_squash_merge: true
allow_merge_commit: false
allow_rebase_merge: true
allow_auto_merge: true
squash_merge_commit_title: "PR_TITLE"
squash_merge_commit_message: "PR_BODY"
merge_commit_title: "PR_TITLE"
merge_commit_message: "PR_BODY"

# Security and access settings
allow_forking: true
allow_update_branch: true
use_squash_pr_title_as_default: true
web_commit_signoff_required: false

# Advanced settings
vulnerability_alerts: true
automated_security_fixes: true
dependency_vulnerability_alerts: true

# Branch protection rules
branches:
  - name: "main"
    protection:
      # Status checks
      required_status_checks:
        strict: true
        contexts:
          - "lint"
          - "security"
          - "test (3.9)"
          - "test (3.10)"
          - "test (3.11)"
          - "test (3.12)"
          - "Business-in-a-Box Validation"
      
      # Pull request requirements
      required_pull_request_reviews:
        required_approving_review_count: 1
        dismiss_stale_reviews: true
        require_code_owner_reviews: false
        dismiss_stale_reviews: true
        require_last_push_approval: false
      
      # Admin enforcement
      enforce_admins: true
      
      # Restrictions
      allow_force_pushes: false
      allow_deletions: false
      
      # Required conversation resolution
      required_conversation_resolution: true

  - name: "develop"
    protection:
      # Status checks for develop branch
      required_status_checks:
        strict: true
        contexts:
          - "lint"
          - "test (3.9)"
          - "test (3.10)"
          - "test (3.11)"
          - "test (3.12)"
      
      # Pull request requirements
      required_pull_request_reviews:
        required_approving_review_count: 1
        dismiss_stale_reviews: true
        require_code_owner_reviews: false
      
      # Admin enforcement
      enforce_admins: false
      
      # Restrictions
      allow_force_pushes: false
      allow_deletions: false

# Repository collaborators and teams (customize as needed)
# collaborators:
#   - username: "{{GITHUB_USERNAME}}"
#     permission: "admin"

# teams:
#   - name: "{{PROJECT_NAME}}-maintainers"
#     permission: "maintain"
#   - name: "{{PROJECT_NAME}}-contributors"
#     permission: "push"

# Environment protection rules
# environments:
#   - name: "production"
#     protection_rules:
#       - type: "required_reviewers"
#         required_reviewers:
#           - "{{GITHUB_USERNAME}}"
#       - type: "wait_timer"
#         wait_timer: 5
